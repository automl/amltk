
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../pipelines/">
      
      
        <link rel="next" href="../../reference/">
      
      
      <link rel="icon" href="../../assets/automl_org.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.8">
    
    
      
        <title>Scheduling - AutoML-Toolkit</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4b4a2bd9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_markdown_exec_ansi.css">
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="deep-purple">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#scheduler" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="AutoML-Toolkit" class="md-header__button md-logo" aria-label="AutoML-Toolkit" data-md-component="logo">
      
  <img src="../../assets/automl_org.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AutoML-Toolkit
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Scheduling
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="deep-purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3m0-4.5c5 0 9.27 3.11 11 7.5-1.73 4.39-6 7.5-11 7.5S2.73 16.39 1 12c1.73-4.39 6-7.5 11-7.5M3.18 12a9.821 9.821 0 0 0 17.64 0 9.821 9.821 0 0 0-17.64 0Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/automl/amltk/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    automl/amltk
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  Guides

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../reference/" class="md-tabs__link">
          
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../examples/" class="md-tabs__link">
          
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/" class="md-tabs__link">
          
  
  API

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../contributing/" class="md-tabs__link">
        
  
    
  
  Contributing

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="AutoML-Toolkit" class="md-nav__button md-logo" aria-label="AutoML-Toolkit" data-md-component="logo">
      
  <img src="../../assets/automl_org.png" alt="logo">

    </a>
    AutoML-Toolkit
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/automl/amltk/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    automl/amltk
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Guides
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Index
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../optimization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optimization Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../pipelines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pipelines Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Scheduling
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Scheduling
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#scheduler" class="md-nav__link">
    Scheduler
  </a>
  
    <nav class="md-nav" aria-label="Scheduler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backend" class="md-nav__link">
    Backend
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-the-scheduler" class="md-nav__link">
    Running the Scheduler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#submitting-compute" class="md-nav__link">
    Submitting Compute
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-events" class="md-nav__link">
    Scheduler Events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controlling-callbacks" class="md-nav__link">
    Controlling Callbacks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stopping-the-scheduler" class="md-nav__link">
    Stopping the Scheduler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exceptions" class="md-nav__link">
    Exceptions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tasks" class="md-nav__link">
    Tasks
  </a>
  
    <nav class="md-nav" aria-label="Tasks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#running-a-task" class="md-nav__link">
    Running a task
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-specific-events" class="md-nav__link">
    Task Specific Events
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-plugins" class="md-nav__link">
    Task Plugins
  </a>
  
    <nav class="md-nav" aria-label="Task Plugins">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#call-limiter" class="md-nav__link">
    Call Limiter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#under-construction" class="md-nav__link">
    Under Construction
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reference
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Scheduling
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Scheduling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/scheduling/scheduler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scheduler
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/scheduling/executors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Executors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/scheduling/task/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/scheduling/plugins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plugins
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/scheduling/events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Events
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Pipelines
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Pipelines
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/pipelines/pipeline/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pipeline
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/pipelines/spaces/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spaces
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/pipelines/builders/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Builders
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Optimization
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Optimization
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/optimization/optimizers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optimizers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/optimization/trials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Trials
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/optimization/history/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    History
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/optimization/profiling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Profiling
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Data
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Data
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/data/buckets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Buckets
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Meta-Learning
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            Meta-Learning
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/metalearning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Metalearning
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Index
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/hpo_with_ensembling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Performing HPO with Post-Hoc Ensembling.
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/simple_hpo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Simple HPO loop
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Index
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Amltk
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Amltk
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/distances/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Distances
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/exceptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exceptions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/options/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Options
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/randomness/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Randomness
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2_6" >
        
          
          <label class="md-nav__link" for="__nav_5_2_6" id="__nav_5_2_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Data
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_6">
            <span class="md-nav__icon md-icon"></span>
            Data
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/data/conversions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conversions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/data/dtype_reduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dtype reduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/data/measure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Measure
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2_7" >
        
          
          <label class="md-nav__link" for="__nav_5_2_7" id="__nav_5_2_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Ensembling
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_7">
            <span class="md-nav__icon md-icon"></span>
            Ensembling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/ensembling/weighted_ensemble_caruana/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Weighted ensemble caruana
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2_8" >
        
          
          <label class="md-nav__link" for="__nav_5_2_8" id="__nav_5_2_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Metalearning
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_8">
            <span class="md-nav__icon md-icon"></span>
            Metalearning
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/metalearning/dataset_distances/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dataset distances
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/metalearning/metafeatures/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Metafeatures
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/metalearning/portfolio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Portfolio
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2_9" >
        
          
          <label class="md-nav__link" for="__nav_5_2_9" id="__nav_5_2_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Optimization
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_9">
            <span class="md-nav__icon md-icon"></span>
            Optimization
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/optimization/history/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    History
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/optimization/optimizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optimizer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/optimization/trial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Trial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2_9_4" >
        
          
          <label class="md-nav__link" for="__nav_5_2_9_4" id="__nav_5_2_9_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Optimizers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_9_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_9_4">
            <span class="md-nav__icon md-icon"></span>
            Optimizers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/optimization/optimizers/neps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Neps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/optimization/optimizers/optuna/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optuna
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/optimization/optimizers/smac/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Smac
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2_10" >
        
          
          <label class="md-nav__link" for="__nav_5_2_10" id="__nav_5_2_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Pipeline
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_10">
            <span class="md-nav__icon md-icon"></span>
            Pipeline
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/pipeline/components/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Components
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/pipeline/node/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Node
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/pipeline/xgboost/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Xgboost
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2_10_4" >
        
          
          <label class="md-nav__link" for="__nav_5_2_10_4" id="__nav_5_2_10_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Builders
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_10_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_10_4">
            <span class="md-nav__icon md-icon"></span>
            Builders
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/pipeline/builders/sklearn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sklearn
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2_10_5" >
        
          
          <label class="md-nav__link" for="__nav_5_2_10_5" id="__nav_5_2_10_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Parsers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_10_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_10_5">
            <span class="md-nav__icon md-icon"></span>
            Parsers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/pipeline/parsers/configspace/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configspace
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/pipeline/parsers/optuna/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optuna
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2_11" >
        
          
          <label class="md-nav__link" for="__nav_5_2_11" id="__nav_5_2_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Profiling
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_11">
            <span class="md-nav__icon md-icon"></span>
            Profiling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/profiling/memory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Memory
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/profiling/profiler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Profiler
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/profiling/timing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timing
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2_12" >
        
          
          <label class="md-nav__link" for="__nav_5_2_12" id="__nav_5_2_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Scheduling
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_12">
            <span class="md-nav__icon md-icon"></span>
            Scheduling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/scheduling/events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Events
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/scheduling/scheduler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scheduler
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/scheduling/task/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/scheduling/termination_strategies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Termination strategies
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2_12_5" >
        
          
          <label class="md-nav__link" for="__nav_5_2_12_5" id="__nav_5_2_12_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Executors
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_12_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_12_5">
            <span class="md-nav__icon md-icon"></span>
            Executors
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/scheduling/executors/dask_jobqueue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dask jobqueue
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/scheduling/executors/sequential_executor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sequential executor
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2_12_6" >
        
          
          <label class="md-nav__link" for="__nav_5_2_12_6" id="__nav_5_2_12_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Plugins
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_12_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_12_6">
            <span class="md-nav__icon md-icon"></span>
            Plugins
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/scheduling/plugins/comm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Comm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/scheduling/plugins/limiter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Limiter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/scheduling/plugins/plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/scheduling/plugins/pynisher/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pynisher
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/scheduling/plugins/threadpoolctl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Threadpoolctl
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/scheduling/plugins/wandb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Wandb
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/scheduling/plugins/warning_filter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Warning filter
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2_13" >
        
          
          <label class="md-nav__link" for="__nav_5_2_13" id="__nav_5_2_13_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Sklearn
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_13">
            <span class="md-nav__icon md-icon"></span>
            Sklearn
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/sklearn/data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/sklearn/estimators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Estimators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/sklearn/voting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Voting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2_14" >
        
          
          <label class="md-nav__link" for="__nav_5_2_14" id="__nav_5_2_14_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Store
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_14">
            <span class="md-nav__icon md-icon"></span>
            Store
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/store/bucket/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bucket
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/store/drop/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Drop
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/store/loader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Loader
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2_14_4" >
        
          
          <label class="md-nav__link" for="__nav_5_2_14_4" id="__nav_5_2_14_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Paths
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_14_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_14_4">
            <span class="md-nav__icon md-icon"></span>
            Paths
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/store/paths/path_bucket/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Path bucket
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api/amltk/store/paths/path_loaders/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Path loaders
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#scheduler" class="md-nav__link">
    Scheduler
  </a>
  
    <nav class="md-nav" aria-label="Scheduler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backend" class="md-nav__link">
    Backend
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-the-scheduler" class="md-nav__link">
    Running the Scheduler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#submitting-compute" class="md-nav__link">
    Submitting Compute
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-events" class="md-nav__link">
    Scheduler Events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controlling-callbacks" class="md-nav__link">
    Controlling Callbacks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stopping-the-scheduler" class="md-nav__link">
    Stopping the Scheduler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exceptions" class="md-nav__link">
    Exceptions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tasks" class="md-nav__link">
    Tasks
  </a>
  
    <nav class="md-nav" aria-label="Tasks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#running-a-task" class="md-nav__link">
    Running a task
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#task-specific-events" class="md-nav__link">
    Task Specific Events
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-plugins" class="md-nav__link">
    Task Plugins
  </a>
  
    <nav class="md-nav" aria-label="Task Plugins">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#call-limiter" class="md-nav__link">
    Call Limiter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#under-construction" class="md-nav__link">
    Under Construction
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Scheduling</h1>

<p>AutoML-toolkit was designed to make offloading computation
away from the main process <strong>easy</strong>, to foster increased ability for
interact-ability deployment and control. At the same time,
we wanted to have an event based system to manage the complexity
that comes with AutoML systems, all while making the API intuitive
and extensible.</p>
<p>By the end of this guide, we hope that the following code, its options
and its inner working become easy to understand.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="exec-156--__tabbed_1_1" name="exec-156--__tabbed_1" type="radio" /><input id="exec-156--__tabbed_1_2" name="exec-156--__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="exec-156--__tabbed_1_1">Source</label><label for="exec-156--__tabbed_1_2">Result</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Scheduler</span><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">amltk</span> <span class="kn">import</span> <span class="n">Scheduler</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="c1"># Some function to offload to compute</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="k">def</span> <span class="nf">collatz</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n">is_even</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="n">is_even</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="c1"># Setup the scheduler and create a &quot;task&quot;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="n">scheduler</span> <span class="o">=</span> <span class="n">Scheduler</span><span class="o">.</span><span class="n">with_processes</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="n">task</span> <span class="o">=</span> <span class="n">scheduler</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">collatz</span><span class="p">)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="n">answers</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="c1"># Tell the scheduler what to do when it starts</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_start</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="k">def</span> <span class="nf">start_computing</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>    <span class="n">answers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>    <span class="n">task</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>  <span class="c1"># Launch the task with the argument 12</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="c1"># Tell the scheduler what to do when the task returns</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="nd">@task</span><span class="o">.</span><span class="n">on_result</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="k">def</span> <span class="nf">compute_next</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">next_n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>    <span class="n">answers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">next_n</span><span class="p">)</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>    <span class="k">if</span> <span class="n">scheduler</span><span class="o">.</span><span class="n">running</span><span class="p">()</span> <span class="ow">and</span> <span class="n">next_n</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>        <span class="n">task</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">next_n</span><span class="p">)</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="c1"># Run the scheduler</span>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="n">scheduler</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># One second timeout</span>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">answers</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>[12, 6, 3, 10, 5, 16, 8, 4, 2, 1]

<pre style="font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace;font-size:0.7rem">
<code style="font-family:inherit"><span style="color: #800080; text-decoration-color: #800080"></span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold"> Scheduler </span><span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span> <span style="font-weight: bold"> Executor                  Queue: (</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold">0</span><span style="font-weight: bold">)                                       </span> <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   ProcessPoolExecutor                                                    <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">&#x27;max_workers&#x27;</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span><span style="font-weight: bold">}</span>                                                       <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                      <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_empty</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_start</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">start_computing</span><span style="font-weight: bold">()</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">1</span><span style="font-style: italic">)</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finishing</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finished</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_stop</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_timeout</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_submitted</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 9</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_done</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 9</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_cancelled</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_exception</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_result</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 9</span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #00afd7; text-decoration-color: #00afd7"> </span><span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">Task </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">collatz</span><span style="color: #00afd7; text-decoration-color: #00afd7; font-weight: bold">(</span><span style="color: #00afd7; text-decoration-color: #00afd7">n: </span><span style="color: #008000; text-decoration-color: #008000">&#x27;int&#x27;</span><span style="color: #00afd7; text-decoration-color: #00afd7; font-weight: bold">)</span><span style="color: #00afd7; text-decoration-color: #00afd7"> -&gt; </span><span style="color: #008000; text-decoration-color: #008000">&#x27;int&#x27;</span><span style="color: #00afd7; text-decoration-color: #00afd7"> </span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_submitted</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 9</span>                                                          <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_done</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 9</span>                                                               <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_result</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 9</span>                                                             <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span>  <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">compute_next</span><span style="font-weight: bold">(</span>_, next_n: <span style="color: #008000; text-decoration-color: #008000">&#x27;int&#x27;</span><span style="font-weight: bold">)</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">9</span><span style="font-style: italic">)</span>                     <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_exception</span>                                                            <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_cancelled</span>                                                            <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"> Ref: </span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">hqovb747</span><span style="color: #00afd7; text-decoration-color: #00afd7"> </span>
</code>
</pre>

</p>
</div>
</div>
</div>
<p>We start by introducing the engine, the <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/scheduler/#amltk.scheduling.scheduler.Scheduler"><code>Scheduler</code></a>
and how this interacts with python's built-in <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.Executor"><code>Executor</code></a>
interface to offload compute to processes, cluster nodes, or even cloud resources.</p>
<p>However, the <code>Scheduler</code> is rather useless without some fuel. For this,
we present <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/task/#amltk.scheduling.task.Task"><code>Tasks</code></a>, the computational task to
perform with the <code>Scheduler</code> and start the system's gears turning.</p>
<details class="tip">
<summary><code>rich</code> printing</summary>
<p>To get the same output locally (terminal or Notebook), you can either
call <code>thing.__rich()__</code>, use <code>from rich import print; print(thing)</code>
or in a Notebook, simply leave it as the last object of a cell.</p>
<p>You'll have to install with <code>amltk[jupyter]</code> or
<code>pip install rich[jupyter]</code> manually.k</p>
</details>
<h2 id="scheduler">Scheduler<a class="headerlink" href="#scheduler" title="Permanent link">#</a></h2>
<p>The core engine of the AutoML-Toolkit is the <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/scheduler/#amltk.scheduling.scheduler.Scheduler"><code>Scheduler</code></a>.
It purpose it to allow you to create workflows in an event driven manner. It does
this by allowing you to <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/scheduler/#amltk.scheduling.scheduler.Scheduler.submit"><code>submit()</code></a> functions
with arguments to be computed in the background, while the main process can continue
to do other work. Once this computation has completed, you can react with various
callbacks, most likely to submit more computations.</p>
<details class="tip">
<summary>Sounds like <code>asyncio</code>?</summary>
<p>If you're familiar with pythons <code>await/async</code> syntax, then this description
might sound similar. The <code>Scheduler</code> is powered by an asynchronous event loop
but hides this complexity in it's API. We do have an asynchronous API which
we will discuss later.</p>
</details>
<h3 id="backend">Backend<a class="headerlink" href="#backend" title="Permanent link">#</a></h3>
<p>The first thing to do is define where this computation should happen.
A <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/scheduler/#amltk.scheduling.scheduler.Scheduler"><code>Scheduler</code></a> builds upon, an
<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.Executor"><code>Executor</code></a>,
an interface provided by python's <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/concurrent.futures.html#module-concurrent.futures"><code>concurrent.futures</code></a>
module. This interface is used to abstract away the details of how the
computation is actually performed. This allows us to easily switch between
different backends, such as threads, processes, clusters, cloud resources,
or even custom backends.</p>
<div class="admonition info inline end">
<p class="admonition-title">Available Executors</p>
<p>You can find a list of these in our
<a href="../../reference/scheduling/executors/">executor reference</a>.</p>
</div>
<p>The simplest one is a <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.ProcessPoolExecutor"><code>ProcessPoolExecutor</code></a>
which will create a pool of processes to run the compute in parallel. We provide
a convenience function for this as
<a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/scheduler/#amltk.scheduling.scheduler.Scheduler.with_processes"><code>Scheduler.with_processes()</code></a>
well as some other builder</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">concurrent.futures</span> <span class="kn">import</span> <span class="n">ProcessPoolExecutor</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">from</span> <span class="nn">amltk.scheduling</span> <span class="kn">import</span> <span class="n">Scheduler</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="n">scheduler</span> <span class="o">=</span> <span class="n">Scheduler</span><span class="o">.</span><span class="n">with_processes</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div>
<div class="result">
<p>
<pre style="font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace;font-size:0.75rem">
<code style="font-family:inherit"><span style="color: #800080; text-decoration-color: #800080"></span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold"> Scheduler </span><span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span> <span style="font-weight: bold"> Executor                  Queue: (</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold">0</span><span style="font-weight: bold">)                                       </span> <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   ProcessPoolExecutor                                                    <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">&#x27;max_workers&#x27;</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">2</span><span style="font-weight: bold">}</span>                                                       <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                      <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_start</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finishing</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finished</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_stop</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_timeout</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_empty</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_submitted</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_done</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_cancelled</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_exception</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_result</span>
</code>
</pre>

</p>
</div>
<h3 id="running-the-scheduler">Running the Scheduler<a class="headerlink" href="#running-the-scheduler" title="Permanent link">#</a></h3>
<p>You may have noticed from the above example that there are many events the shceduler will emit,
such as <code>@on_start</code> or <code>@on_future_done</code>. One particularly important one is
<a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/scheduler/#amltk.scheduling.scheduler.Scheduler.on_start"><code>@on_start</code></a>, an event to signal
the scheduler has started and ready to accept tasks.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">amltk.scheduling</span> <span class="kn">import</span> <span class="n">Scheduler</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">scheduler</span> <span class="o">=</span> <span class="n">Scheduler</span><span class="o">.</span><span class="n">with_processes</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_start</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="k">def</span> <span class="nf">print_hello</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="result">
<p>
<pre style="font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace;font-size:0.7rem">
<code style="font-family:inherit"><span style="color: #800080; text-decoration-color: #800080"></span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold"> Scheduler </span><span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span> <span style="font-weight: bold"> Executor                  Queue: (</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold">0</span><span style="font-weight: bold">)                                       </span> <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   ProcessPoolExecutor                                                    <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">&#x27;max_workers&#x27;</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span><span style="font-weight: bold">}</span>                                                       <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                      <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_start</span>
<span style="color: #800080; text-decoration-color: #800080">    </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">print_hello</span><span style="font-weight: bold">()</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finishing</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finished</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_stop</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_timeout</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_empty</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_submitted</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_done</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_cancelled</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_exception</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_result</span>
</code>
</pre>

</p>
</div>
<p>From the output, we can see that the <code>print_hello()</code> function was registered
to the event <code>@on_start</code>, but it was never called and no <code class="highlight"><span class="s2">&quot;hello&quot;</span></code> printed.</p>
<p>For this to happen, we actually have to <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/scheduler/#amltk.scheduling.scheduler.Scheduler.run"><code>run()</code></a> the scheduler.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">amltk.scheduling</span> <span class="kn">import</span> <span class="n">Scheduler</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">scheduler</span> <span class="o">=</span> <span class="n">Scheduler</span><span class="o">.</span><span class="n">with_processes</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_start</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="k">def</span> <span class="nf">print_hello</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="n">scheduler</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
<div class="result">
<p>hello

<pre style="font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace;font-size:0.7rem">
<code style="font-family:inherit"><span style="color: #800080; text-decoration-color: #800080"></span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold"> Scheduler </span><span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span> <span style="font-weight: bold"> Executor                  Queue: (</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold">0</span><span style="font-weight: bold">)                                       </span> <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   ProcessPoolExecutor                                                    <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">&#x27;max_workers&#x27;</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span><span style="font-weight: bold">}</span>                                                       <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                      <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_empty</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_start</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">print_hello</span><span style="font-weight: bold">()</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">1</span><span style="font-style: italic">)</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finishing</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finished</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_stop</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_timeout</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_submitted</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_done</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_cancelled</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_exception</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_result</span>
</code>
</pre>

</p>
</div>
<p>Now the output will show a little yellow number next to the <code>@on_start</code>
and the <code>print_hello()</code>, indicating that event was triggered and the callback
was called.</p>
<p>You can subscribe multiple callbacks to the same event and they will each be called
in the order they were registered.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">amltk.scheduling</span> <span class="kn">import</span> <span class="n">Scheduler</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">scheduler</span> <span class="o">=</span> <span class="n">Scheduler</span><span class="o">.</span><span class="n">with_processes</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_start</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="k">def</span> <span class="nf">print_hello_1</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello 1&quot;</span><span class="p">)</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="k">def</span> <span class="nf">print_hello_2</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello 2&quot;</span><span class="p">)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="n">scheduler</span><span class="o">.</span><span class="n">on_start</span><span class="p">(</span><span class="n">print_hello_2</span><span class="p">)</span>  <span class="c1"># You can also register without a decorator</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="n">scheduler</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
<div class="result">
<p>hello 1
hello 2

<pre style="font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace;font-size:0.7rem">
<code style="font-family:inherit"><span style="color: #800080; text-decoration-color: #800080"></span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold"> Scheduler </span><span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span> <span style="font-weight: bold"> Executor                  Queue: (</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold">0</span><span style="font-weight: bold">)                                       </span> <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   ProcessPoolExecutor                                                    <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">&#x27;max_workers&#x27;</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span><span style="font-weight: bold">}</span>                                                       <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                      <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_empty</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_start</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">print_hello_1</span><span style="font-weight: bold">()</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">1</span><span style="font-style: italic">)</span>
<span style="color: #800080; text-decoration-color: #800080">    </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">print_hello_2</span><span style="font-weight: bold">()</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">1</span><span style="font-style: italic">)</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finishing</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finished</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_stop</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_timeout</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_submitted</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_done</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_cancelled</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_exception</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_result</span>
</code>
</pre>

</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Determinism</p>
<p>It's worth noting that even though we are using an event based system, we
are still guaranteed deterministic execution of the callbacks for any given
event. The source of indeterminism is the order in which events are emitted,
this is determined entirely by your compute functions themselves.</p>
</div>
<h3 id="submitting-compute">Submitting Compute<a class="headerlink" href="#submitting-compute" title="Permanent link">#</a></h3>
<p>The <code>Scheduler</code> exposes a simple <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/scheduler/#amltk.scheduling.scheduler.Scheduler.submit"><code>submit()</code></a>
method which allows you to submit compute to be performed <strong>while the scheduler is running</strong>.</p>
<p>While we will later visit the <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/task/#amltk.scheduling.task.Task"><code>Task</code></a> class for
defining these units of compute, is benficial to see how the <code>Scheduler</code>
operates directly with <code>submit()</code>, without abstractions.</p>
<p>In the below example, we will use the
<a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/scheduler/#amltk.scheduling.scheduler.Scheduler.on_future_result"><code>@on_future_result</code></a>
event to submit more compute once the previous computation has returned a result.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">amltk.scheduling</span> <span class="kn">import</span> <span class="n">Scheduler</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">scheduler</span> <span class="o">=</span> <span class="n">Scheduler</span><span class="o">.</span><span class="n">with_processes</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="k">def</span> <span class="nf">expensive_function</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="k">return</span> <span class="mi">2</span> <span class="o">**</span> <span class="n">x</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_start</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="k">def</span> <span class="nf">submit_calculations</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="hll">    <span class="n">scheduler</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">expensive_function</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># Submit compute</span>
</span><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="c1"># Called when the submitted function is done</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="hll"><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_future_result</span>
</span><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="k">def</span> <span class="nf">print_result</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">result</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>    <span class="k">if</span> <span class="n">result</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>        <span class="n">scheduler</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">expensive_function</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="hll">
</span><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="n">scheduler</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
<div class="result">
<p>4
16

<pre style="font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace;font-size:0.7rem">
<code style="font-family:inherit"><span style="color: #800080; text-decoration-color: #800080"></span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold"> Scheduler </span><span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span> <span style="font-weight: bold"> Executor                  Queue: (</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold">0</span><span style="font-weight: bold">)                                       </span> <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   ProcessPoolExecutor                                                    <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">&#x27;max_workers&#x27;</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">2</span><span style="font-weight: bold">}</span>                                                       <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                      <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_empty</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_start</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">submit_calculations</span><span style="font-weight: bold">()</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">1</span><span style="font-style: italic">)</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finishing</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finished</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_stop</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_timeout</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_submitted</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 2</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_done</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 2</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_cancelled</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_exception</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_result</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 2</span>
<span style="color: #800080; text-decoration-color: #800080">    </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">print_result</span><span style="font-weight: bold">(</span>_, result: <span style="color: #008000; text-decoration-color: #008000">&#x27;int&#x27;</span><span style="font-weight: bold">)</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">2</span><span style="font-style: italic">)</span>
</code>
</pre>

</p>
</div>
<details class="tip">
<summary>What's a <code>Future</code>?</summary>
<p>A <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/asyncio-future.html#asyncio.Future"><code>Future</code></a> is a special object which represents the result
of an asynchronous computation. It's an object that can be queried for
its result/exception of some computation which may not have completed yet.</p>
</details>
<h3 id="scheduler-events">Scheduler Events<a class="headerlink" href="#scheduler-events" title="Permanent link">#</a></h3>
<p>Here are some of the possible <code>@events</code> a <code>Scheduler</code> can emit, but
please visit the <a href="../../reference/scheduling/scheduler/">scheduler reference</a>
for a complete list.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:11"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><input id="__tabbed_1_5" name="__tabbed_1" type="radio" /><input id="__tabbed_1_6" name="__tabbed_1" type="radio" /><input id="__tabbed_1_7" name="__tabbed_1" type="radio" /><input id="__tabbed_1_8" name="__tabbed_1" type="radio" /><input id="__tabbed_1_9" name="__tabbed_1" type="radio" /><input id="__tabbed_1_10" name="__tabbed_1" type="radio" /><input id="__tabbed_1_11" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1"><code>@on_start</code></label><label for="__tabbed_1_2"><code>@on_future_result</code></label><label for="__tabbed_1_3"><code>@on_future_exception</code></label><label for="__tabbed_1_4"><code>@on_future_submitted</code></label><label for="__tabbed_1_5"><code>@on_future_done</code></label><label for="__tabbed_1_6"><code>@on_future_cancelled</code></label><label for="__tabbed_1_7"><code>@on_timeout</code></label><label for="__tabbed_1_8"><code>@on_stop</code></label><label for="__tabbed_1_9"><code>@on_finishing</code></label><label for="__tabbed_1_10"><code>@on_finished</code></label><label for="__tabbed_1_11"><code>@on_empty</code></label></div>
<div class="tabbed-content">
<div class="tabbed-block">


<div class="doc doc-object doc-attribute">



  <div class="doc doc-contents first">
  
      <p>A <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/events/#amltk.scheduling.events.Subscriber"><code>Subscriber</code></a> which is called when the
scheduler starts. This is the first event emitted by the scheduler and
one of the only ways to submit the initial compute to the scheduler.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_start</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="k">def</span> <span class="nf">my_callback</span><span class="p">():</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="o">...</span>
</code></pre></div>
  </div>

</div></div>
<div class="tabbed-block">


<div class="doc doc-object doc-attribute">



  <div class="doc doc-contents first">
  
      <p>A <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/events/#amltk.scheduling.events.Subscriber"><code>Subscriber</code></a> which is called when
a future returned with a result, no exception raise.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_future_result</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="k">def</span> <span class="nf">my_callback</span><span class="p">(</span><span class="n">future</span><span class="p">:</span> <span class="n">Future</span><span class="p">,</span> <span class="n">result</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="o">...</span>
</code></pre></div>
  </div>

</div></div>
<div class="tabbed-block">


<div class="doc doc-object doc-attribute">



  <div class="doc doc-contents first">
  
      <p>A <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/events/#amltk.scheduling.events.Subscriber"><code>Subscriber</code></a> which is called when
some compute raised an uncaught exception.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_future_exception</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="k">def</span> <span class="nf">my_callback</span><span class="p">(</span><span class="n">future</span><span class="p">:</span> <span class="n">Future</span><span class="p">,</span> <span class="n">exception</span><span class="p">:</span> <span class="ne">BaseException</span><span class="p">):</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="o">...</span>
</code></pre></div>
  </div>

</div></div>
<div class="tabbed-block">


<div class="doc doc-object doc-attribute">



  <div class="doc doc-contents first">
  
      <p>A <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/events/#amltk.scheduling.events.Subscriber"><code>Subscriber</code></a> which is called when
some compute is submitted.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_future_submitted</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="k">def</span> <span class="nf">my_callback</span><span class="p">(</span><span class="n">future</span><span class="p">:</span> <span class="n">Future</span><span class="p">):</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="o">...</span>
</code></pre></div>
  </div>

</div></div>
<div class="tabbed-block">


<div class="doc doc-object doc-attribute">



  <div class="doc doc-contents first">
  
      <p>A <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/events/#amltk.scheduling.events.Subscriber"><code>Subscriber</code></a> which is called when
some compute is done, regardless of whether it was successful or not.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_future_done</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="k">def</span> <span class="nf">my_callback</span><span class="p">(</span><span class="n">future</span><span class="p">:</span> <span class="n">Future</span><span class="p">):</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="o">...</span>
</code></pre></div>
  </div>

</div></div>
<div class="tabbed-block">


<div class="doc doc-object doc-attribute">



  <div class="doc doc-contents first">
  
      <p>A <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/events/#amltk.scheduling.events.Subscriber"><code>Subscriber</code></a> which is called
when a future is cancelled. This usually occurs due to the underlying Scheduler,
and is not something we do directly, other than when shutting down the scheduler.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_future_cancelled</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="k">def</span> <span class="nf">my_callback</span><span class="p">(</span><span class="n">future</span><span class="p">:</span> <span class="n">Future</span><span class="p">):</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="o">...</span>
</code></pre></div>
  </div>

</div></div>
<div class="tabbed-block">


<div class="doc doc-object doc-attribute">



  <div class="doc doc-contents first">
  
      <p>A <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/events/#amltk.scheduling.events.Subscriber"><code>Subscriber</code></a> which is called when
the scheduler reaches the timeout.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_timeout</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="k">def</span> <span class="nf">my_callback</span><span class="p">():</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="o">...</span>
</code></pre></div>
  </div>

</div></div>
<div class="tabbed-block">


<div class="doc doc-object doc-attribute">



  <div class="doc doc-contents first">
  
      <p>A <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/events/#amltk.scheduling.events.Subscriber"><code>Subscriber</code></a> which is called when the
scheduler is has been stopped due to the <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/scheduler/#amltk.scheduling.scheduler.Scheduler.stop"><code>stop()</code></a>
method being called.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_stop</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="k">def</span> <span class="nf">my_callback</span><span class="p">(</span><span class="n">stop_msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">exception</span><span class="p">:</span> <span class="ne">BaseException</span> <span class="o">|</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="o">...</span>
</code></pre></div>
  </div>

</div></div>
<div class="tabbed-block">


<div class="doc doc-object doc-attribute">



  <div class="doc doc-contents first">
  
      <p>A <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/events/#amltk.scheduling.events.Subscriber"><code>Subscriber</code></a> which is called when the
scheduler is finishing up. This occurs right before the scheduler shuts down
the executor.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_finishing</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="k">def</span> <span class="nf">my_callback</span><span class="p">():</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="o">...</span>
</code></pre></div>
  </div>

</div></div>
<div class="tabbed-block">


<div class="doc doc-object doc-attribute">



  <div class="doc doc-contents first">
  
      <p>A <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/events/#amltk.scheduling.events.Subscriber"><code>Subscriber</code></a> which is called when
the scheduler is finished, has shutdown the executor and possibly
terminated any remaining compute.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_finished</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="k">def</span> <span class="nf">my_callback</span><span class="p">():</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="o">...</span>
</code></pre></div>
  </div>

</div></div>
<div class="tabbed-block">


<div class="doc doc-object doc-attribute">



  <div class="doc doc-contents first">
  
      <p>A <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/events/#amltk.scheduling.events.Subscriber"><code>Subscriber</code></a> which is called when the
queue is empty. This can be useful to re-fill the queue and prevent the
scheduler from exiting.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_empty</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="k">def</span> <span class="nf">my_callback</span><span class="p">():</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    <span class="o">...</span>
</code></pre></div>
  </div>

</div></div>
</div>
</div>
<p>We can access all the counts of all events through the
<a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/events/#amltk.scheduling.events.Emitter.event_counts"><code>scheduler.event_counts</code></a> property.
This is a <code>dict</code> which has the events as keys and the amount of times
it was emitted as the values.</p>
<h3 id="controlling-callbacks">Controlling Callbacks<a class="headerlink" href="#controlling-callbacks" title="Permanent link">#</a></h3>
<p>There's a few parameters you can pass to any event subscriber
such as <code>@on_start</code> or <code>@on_future_result</code>.
These control the behavior of what happens when its event is fired and can
be used to control the flow of your system.</p>
<p>These are covered more extensively in our <a href="../../reference/scheduling/events/">events reference</a>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:4"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><input id="__tabbed_2_4" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1"><code>repeat=</code></label><label for="__tabbed_2_2"><code>limit=</code></label><label for="__tabbed_2_3"><code>when=</code></label><label for="__tabbed_2_4"><code>every=</code></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Repeat the callback a certain number of times, every time the event is emitted.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">amltk.scheduling</span> <span class="kn">import</span> <span class="n">Scheduler</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">scheduler</span> <span class="o">=</span> <span class="n">Scheduler</span><span class="o">.</span><span class="n">with_processes</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="c1"># Print &quot;hello&quot; 3 times when the scheduler starts</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="hll"><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_start</span><span class="p">(</span><span class="n">repeat</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="k">def</span> <span class="nf">print_hello</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="n">scheduler</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
<div class="result">
<p>hello
hello
hello

<pre style="font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace;font-size:0.7rem">
<code style="font-family:inherit"><span style="color: #800080; text-decoration-color: #800080"></span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold"> Scheduler </span><span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span> <span style="font-weight: bold"> Executor                  Queue: (</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold">0</span><span style="font-weight: bold">)                                       </span> <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   ProcessPoolExecutor                                                    <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">&#x27;max_workers&#x27;</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span><span style="font-weight: bold">}</span>                                                       <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                      <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_empty</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_start</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">print_hello</span><span style="font-weight: bold">()</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">3</span><span style="font-style: italic">)</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finishing</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finished</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_stop</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_timeout</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_submitted</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_done</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_cancelled</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_exception</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_result</span>
</code>
</pre>

</p>
</div><div class="markdown-exec"></div>
</p>
</div>
<div class="tabbed-block">
<p>Limit the number of times a callback can be called, after which, the callback
will be ignored.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">asyncio</span> <span class="kn">import</span> <span class="n">Future</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">from</span> <span class="nn">amltk.scheduling</span> <span class="kn">import</span> <span class="n">Scheduler</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="n">scheduler</span> <span class="o">=</span> <span class="n">Scheduler</span><span class="o">.</span><span class="n">with_processes</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="k">def</span> <span class="nf">expensive_function</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="k">return</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_start</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="k">def</span> <span class="nf">submit_calculations</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>    <span class="n">scheduler</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">expensive_function</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="hll"><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_future_result</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="k">def</span> <span class="nf">print_result</span><span class="p">(</span><span class="n">future</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>    <span class="n">scheduler</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">expensive_function</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="n">scheduler</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
<div class="result">
<p>
<pre style="font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace;font-size:0.7rem">
<code style="font-family:inherit"><span style="color: #800080; text-decoration-color: #800080"></span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold"> Scheduler </span><span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span> <span style="font-weight: bold"> Executor                  Queue: (</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold">0</span><span style="font-weight: bold">)                                       </span> <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   ProcessPoolExecutor                                                    <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">&#x27;max_workers&#x27;</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">2</span><span style="font-weight: bold">}</span>                                                       <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                      <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_empty</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_start</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">submit_calculations</span><span style="font-weight: bold">()</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">1</span><span style="font-style: italic">)</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finishing</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finished</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_stop</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_timeout</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_submitted</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 4</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_done</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 4</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_cancelled</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_exception</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_result</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 4</span>
<span style="color: #800080; text-decoration-color: #800080">    </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">print_result</span><span style="font-weight: bold">(</span>future, result<span style="font-weight: bold">)</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">3</span><span style="font-style: italic">)</span>
</code>
</pre>

</p>
</div><div class="markdown-exec"></div>
</p>
</div>
<div class="tabbed-block">
<p>A callable which takes no arguments and returns a <code>bool</code>. The callback
will only be called when the <code>when</code> callable returns <code>True</code>.</p>
<p>Below is a rather contrived example, but it shows how we can use the
<code>when</code> parameter to control when the callback is called.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span> <span class="nn">random</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">from</span> <span class="nn">amltk.scheduling</span> <span class="kn">import</span> <span class="n">Scheduler</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="n">LOCALE</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s2">&quot;English&quot;</span><span class="p">,</span> <span class="s2">&quot;German&quot;</span><span class="p">])</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="n">scheduler</span> <span class="o">=</span> <span class="n">Scheduler</span><span class="o">.</span><span class="n">with_processes</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="hll"><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_start</span><span class="p">(</span><span class="n">when</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">LOCALE</span> <span class="o">==</span> <span class="s2">&quot;English&quot;</span><span class="p">)</span>
</span><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="k">def</span> <span class="nf">print_hello</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="hll"><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_start</span><span class="p">(</span><span class="n">when</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">LOCALE</span> <span class="o">==</span> <span class="s2">&quot;German&quot;</span><span class="p">)</span>
</span><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="k">def</span> <span class="nf">print_guten_tag</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;guten tag&quot;</span><span class="p">)</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="n">scheduler</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
<div class="result">
<p>guten tag

<pre style="font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace;font-size:0.7rem">
<code style="font-family:inherit"><span style="color: #800080; text-decoration-color: #800080"></span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold"> Scheduler </span><span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span> <span style="font-weight: bold"> Executor                  Queue: (</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold">0</span><span style="font-weight: bold">)                                       </span> <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   ProcessPoolExecutor                                                    <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">&#x27;max_workers&#x27;</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span><span style="font-weight: bold">}</span>                                                       <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                      <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_empty</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_start</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">print_hello</span><span style="font-weight: bold">()</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span>
<span style="color: #800080; text-decoration-color: #800080">    </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">print_guten_tag</span><span style="font-weight: bold">()</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">1</span><span style="font-style: italic">)</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finishing</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finished</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_stop</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_timeout</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_submitted</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_done</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_cancelled</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_exception</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_result</span>
</code>
</pre>

</p>
</div><div class="markdown-exec"></div>
</p>
</div>
<div class="tabbed-block">
<p>Only call the callback every <code>every</code> times the event is emitted. This
includes the first time it's called.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">amltk.scheduling</span> <span class="kn">import</span> <span class="n">Scheduler</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">scheduler</span> <span class="o">=</span> <span class="n">Scheduler</span><span class="o">.</span><span class="n">with_processes</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="c1"># Print &quot;hello&quot; only every 2 times the scheduler starts.</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="hll"><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_start</span><span class="p">(</span><span class="n">every</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="k">def</span> <span class="nf">print_hello</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="c1"># Run the scheduler 5 times</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="n">scheduler</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="n">scheduler</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="n">scheduler</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="n">scheduler</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="n">scheduler</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
<div class="result">
<p>hello
hello

<pre style="font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace;font-size:0.7rem">
<code style="font-family:inherit"><span style="color: #800080; text-decoration-color: #800080"></span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold"> Scheduler </span><span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span> <span style="font-weight: bold"> Executor                  Queue: (</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold">0</span><span style="font-weight: bold">)                                       </span> <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   ProcessPoolExecutor                                                    <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">&#x27;max_workers&#x27;</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span><span style="font-weight: bold">}</span>                                                       <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                      <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_empty</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 5</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_start</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 5</span>
<span style="color: #800080; text-decoration-color: #800080">    </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">print_hello</span><span style="font-weight: bold">()</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">2</span><span style="font-style: italic">)</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finishing</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 5</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finished</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 5</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_stop</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_timeout</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_submitted</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_done</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_cancelled</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_exception</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_result</span>
</code>
</pre>

</p>
</div><div class="markdown-exec"></div>
</p>
</div>
</div>
</div>
<h3 id="stopping-the-scheduler">Stopping the Scheduler<a class="headerlink" href="#stopping-the-scheduler" title="Permanent link">#</a></h3>
<p>There are a few ways the <code>Scheduler</code> will stop. The one we have implicitly
been using this whole time is when the <code>Scheduler</code> has run out of events
to process with no compute left to perform. This is the default behavior
but can be controlled with <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/scheduler/#amltk.scheduling.scheduler.Scheduler.run"><code>run(end_on_empty=False)</code></a>.</p>
<p>However there are more explicit methods.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1"><code>scheduler.stop()</code></label><label for="__tabbed_3_2"><code>scheduler.run(timeout=...)</code></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>You can explicitly call <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/scheduler/#amltk.scheduling.scheduler.Scheduler.stop"><code>stop()</code></a>
from aywhere on the <code>Scheduler</code> to stop it. By default this will
wait for any currently running compute to finish but you can inform the
scheduler to stop immediately with <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/scheduler/#amltk.scheduling.scheduler.Scheduler.run"><code>run(wait=False)</code></a>.</p>
<p>You'll notice this in the event count of the Scheduler where the event
<code>@on_future_cancelled</code> was fired.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span> <span class="nn">time</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">from</span> <span class="nn">amltk.scheduling</span> <span class="kn">import</span> <span class="n">Scheduler</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="n">scheduler</span> <span class="o">=</span> <span class="n">Scheduler</span><span class="o">.</span><span class="n">with_processes</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="k">def</span> <span class="nf">expensive_function</span><span class="p">(</span><span class="n">sleep_for</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">sleep_for</span><span class="p">)</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_start</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="k">def</span> <span class="nf">submit_calculations</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>    <span class="n">scheduler</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">expensive_function</span><span class="p">,</span> <span class="n">sleep_for</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="hll"><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_future_submitted</span>
</span><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="hll"><span class="k">def</span> <span class="nf">stop_the_scheduler</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="hll">    <span class="n">scheduler</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</span><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="n">scheduler</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>
<div class="result">
<p>
<pre style="font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace;font-size:0.7rem">
<code style="font-family:inherit"><span style="color: #800080; text-decoration-color: #800080"></span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold"> Scheduler </span><span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span> <span style="font-weight: bold"> Executor                  Queue: (</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold">0</span><span style="font-weight: bold">)                                       </span> <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   ProcessPoolExecutor                                                    <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">&#x27;max_workers&#x27;</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span><span style="font-weight: bold">}</span>                                                       <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                      <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_empty</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_start</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">submit_calculations</span><span style="font-weight: bold">()</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">1</span><span style="font-style: italic">)</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finishing</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finished</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_stop</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_timeout</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_submitted</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">stop_the_scheduler</span><span style="font-weight: bold">(</span>_<span style="font-weight: bold">)</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">1</span><span style="font-style: italic">)</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_done</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_cancelled</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_exception</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_result</span>
</code>
</pre>

</p>
</div><div class="markdown-exec"></div>
</p>
</div>
<div class="tabbed-block">
<p>You can also tell the <code>Scheduler</code> to stop after a certain amount of time
with the <code>timeout=</code> argument to <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/scheduler/#amltk.scheduling.scheduler.Scheduler.run"><code>run()</code></a>.</p>
<p>This will also trigger the <code>@on_timeout</code> event as seen in the <code>Scheduler</code> output.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span> <span class="nn">time</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">from</span> <span class="nn">amltk.scheduling</span> <span class="kn">import</span> <span class="n">Scheduler</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="n">scheduler</span> <span class="o">=</span> <span class="n">Scheduler</span><span class="o">.</span><span class="n">with_processes</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="k">def</span> <span class="nf">expensive_function</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    <span class="k">return</span> <span class="mi">42</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_start</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="k">def</span> <span class="nf">submit_calculations</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>    <span class="n">scheduler</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">expensive_function</span><span class="p">)</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="c1"># The will endlessly loop the scheduler</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_future_done</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="k">def</span> <span class="nf">submit_again</span><span class="p">(</span><span class="n">future</span><span class="p">:</span> <span class="n">Future</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>    <span class="k">if</span> <span class="n">scheduler</span><span class="o">.</span><span class="n">running</span><span class="p">():</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>        <span class="n">scheduler</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">expensive_function</span><span class="p">)</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="hll">
</span><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="n">scheduler</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># End after 1 second</span>
</code></pre></div>
<div class="result">
<p>
<pre style="font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace;font-size:0.7rem">
<code style="font-family:inherit"><span style="color: #800080; text-decoration-color: #800080"></span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold"> Scheduler </span><span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span> <span style="font-weight: bold"> Executor                  Queue: (</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold">0</span><span style="font-weight: bold">)                                       </span> <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   ProcessPoolExecutor                                                    <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">&#x27;max_workers&#x27;</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span><span style="font-weight: bold">}</span>                                                       <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                      <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_empty</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_start</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">submit_calculations</span><span style="font-weight: bold">()</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">1</span><span style="font-style: italic">)</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finishing</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finished</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_stop</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_timeout</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_submitted</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 10</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_done</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 10</span>
<span style="color: #800080; text-decoration-color: #800080">    </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">submit_again</span><span style="font-weight: bold">(</span>future: <span style="color: #008000; text-decoration-color: #008000">&#x27;Future&#x27;</span><span style="font-weight: bold">)</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">10</span><span style="font-style: italic">)</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_cancelled</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_exception</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_result</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 10</span>
</code>
</pre>

</p>
</div><div class="markdown-exec"></div>
</p>
</div>
</div>
</div>
<h3 id="exceptions">Exceptions<a class="headerlink" href="#exceptions" title="Permanent link">#</a></h3>
<p>Dealing with exceptions is an important part of any AutoML system. It is important
to clarify that there's two kinds of exceptions that can occur within the Scheduler.</p>
<p>The 1st kind that can happen is within some function submitted with
<a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/scheduler/#amltk.scheduling.scheduler.Scheduler.submit"><code>submit()</code></a>. When this happens,
the <code>@on_future_exception</code> will be emitted, passing the exception to the callback.</p>
<p>By default, the <code>Scheduler</code> will then raise the exception that occured up to your program
and end it's computations. This is done by setting
<a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/scheduler/#amltk.scheduling.scheduler.Scheduler"><code class="highlight"><span class="n">run</a><span class="p">(</span><span class="n">on_exception</span><span class="o">=</span><span class="s2">&quot;raise&quot;</span><span class="p">)</span></code></span>,
the default, but it also takes two other possibilities:</p>
<ul>
<li><code class="highlight"><span class="s2">&quot;ignore&quot;</span></code> - Just ignore the exception and keep running.</li>
<li><code class="highlight"><span class="s2">&quot;end&quot;</span></code> - Stop the scheduler but don't raise it.</li>
</ul>
<p>One example is to just <code>stop()</code> the scheduler when some exception occurs.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">amltk.scheduling</span> <span class="kn">import</span> <span class="n">Scheduler</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">scheduler</span> <span class="o">=</span> <span class="n">Scheduler</span><span class="o">.</span><span class="n">with_processes</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="k">def</span> <span class="nf">failing_compute_function</span><span class="p">(</span><span class="n">err_msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_start</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="k">def</span> <span class="nf">submit_calculations</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>    <span class="n">scheduler</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">failing_compute_function</span><span class="p">,</span> <span class="s2">&quot;Failed!&quot;</span><span class="p">)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="hll"><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_future_exception</span>
</span><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="hll"><span class="k">def</span> <span class="nf">stop_the_scheduler</span><span class="p">(</span><span class="n">future</span><span class="p">:</span> <span class="n">Future</span><span class="p">,</span> <span class="n">exception</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="hll">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got exception </span><span class="si">{</span><span class="n">exception</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>    <span class="n">scheduler</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>  <span class="c1"># You can optionally pass `exception=` for logging purposes.</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="n">scheduler</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">on_exception</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>  <span class="c1"># Scheduler will not stop because of the error</span>
</code></pre></div>
<div class="result">
<p>Got exception Failed!

<pre style="font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace;font-size:0.7rem">
<code style="font-family:inherit"><span style="color: #800080; text-decoration-color: #800080"></span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold"> Scheduler </span><span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span> <span style="font-weight: bold"> Executor                  Queue: (</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold">0</span><span style="font-weight: bold">)                                       </span> <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   ProcessPoolExecutor                                                    <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">&#x27;max_workers&#x27;</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span><span style="font-weight: bold">}</span>                                                       <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                      <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_empty</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_start</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">submit_calculations</span><span style="font-weight: bold">()</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">1</span><span style="font-style: italic">)</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finishing</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finished</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_stop</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_timeout</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_submitted</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_done</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_cancelled</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_exception</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">    </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">stop_the_scheduler</span><span style="font-weight: bold">(</span>future: <span style="color: #008000; text-decoration-color: #008000">&#x27;Future&#x27;</span>, exception: <span style="color: #008000; text-decoration-color: #008000">&#x27;Exception&#x27;</span><span style="font-weight: bold">)</span> -&gt; 
<span style="color: #800080; text-decoration-color: #800080">    </span>    <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">1</span><span style="font-style: italic">)</span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_result</span>
</code>
</pre>

</p>
</div>
<p>The second kind of exception that can happen is one that happens in the main process.
For example this could happen in one of your callbacks or in the <code>Scheduler</code> itself (please raise an issue if this occurs!).
By default when you call <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/scheduler/#amltk.scheduling.scheduler.Scheduler.run"><code>run()</code></a> it will set
<code class="highlight"><span class="n">run</span><span class="p">(</span><span class="n">on_exception</span><span class="o">=</span><span class="s2">&quot;raise&quot;</span><span class="p">)</span></code> and raise the exception that occurred, with its traceback.
This is to help you debug your program.</p>
<p>You may also use <code class="highlight"><span class="n">run</span><span class="p">(</span><span class="n">on_exception</span><span class="o">=</span><span class="s2">&quot;end&quot;</span><span class="p">)</span></code> which will just end the <code>Scheduler</code> and raise no exception,
or use <code class="highlight"><span class="n">run</span><span class="p">(</span><span class="n">on_exception</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span></code>, in which case the <code>Scheduler</code> will continue on with whatever events
are next to process.</p>
<h2 id="tasks">Tasks<a class="headerlink" href="#tasks" title="Permanent link">#</a></h2>
<p>Now that we have seen how the <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/scheduler/#amltk.scheduling.scheduler.Scheduler"><code>Scheduler</code></a> works,
we can look at the <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/task/#amltk.scheduling.task.Task"><code>Task</code></a>, a wrapper around a function
that you'll want to submit to the <code>Scheduler</code>. The preferred way to create one
of these <code>Tasks</code> is to use <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/scheduler/#amltk.scheduling.scheduler.Scheduler.task"><code>scheduler.task(function)</code></a>.</p>
<h3 id="running-a-task">Running a task<a class="headerlink" href="#running-a-task" title="Permanent link">#</a></h3>
<p>In the following example, we will create a task for the scheduler and attempt to
call it. This task will be run by the backend specified.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">amltk</span> <span class="kn">import</span> <span class="n">Scheduler</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="c1"># Some function to offload to compute</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="k">def</span> <span class="nf">collatz</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n">is_even</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="n">is_even</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="n">scheduler</span> <span class="o">=</span> <span class="n">Scheduler</span><span class="o">.</span><span class="n">with_processes</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="c1"># Creating a &quot;task&quot;</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="n">collatz_task</span> <span class="o">=</span> <span class="n">scheduler</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">collatz</span><span class="p">)</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>    <span class="n">collatz_task</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="result">
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">amltk</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">SchedulerNotRunningError</span><span class="s1">&#39;&gt;: Scheduler is not running, cannot submit task &lt;function collatz at 0x7fb29a6afeb0&gt; with args=(5,), kwargs=</span><span class="si">{}</span>
</code></pre></div>
</div>
<p>As you can see, we <strong>can not</strong> submit tasks before the scheduler is running. This
is because the backend that it's running on usually has to setup and teardown when
<code>scheduler.run()</code> is called.</p>
<p>The proper approach would be to do the following:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">amltk</span> <span class="kn">import</span> <span class="n">Scheduler</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="c1"># Some function to offload to compute</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="k">def</span> <span class="nf">collatz</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n">is_even</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="n">is_even</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="c1"># Setup the scheduler and create a &quot;task&quot;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="n">scheduler</span> <span class="o">=</span> <span class="n">Scheduler</span><span class="o">.</span><span class="n">with_processes</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="n">collatz_task</span> <span class="o">=</span> <span class="n">scheduler</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">collatz</span><span class="p">)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_start</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="k">def</span> <span class="nf">launch_initial_task</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>    <span class="n">collatz_task</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="n">scheduler</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
<div class="result">
<p>
<pre style="font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace;font-size:0.7rem">
<code style="font-family:inherit"><span style="color: #800080; text-decoration-color: #800080"></span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold"> Scheduler </span><span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span> <span style="font-weight: bold"> Executor                  Queue: (</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold">0</span><span style="font-weight: bold">)                                       </span> <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   ProcessPoolExecutor                                                    <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">&#x27;max_workers&#x27;</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span><span style="font-weight: bold">}</span>                                                       <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                      <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_empty</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_start</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">launch_initial_task</span><span style="font-weight: bold">()</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">1</span><span style="font-style: italic">)</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finishing</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finished</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_stop</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_timeout</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_submitted</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_done</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_cancelled</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_exception</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_result</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #00afd7; text-decoration-color: #00afd7"> </span><span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">Task </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">collatz</span><span style="color: #00afd7; text-decoration-color: #00afd7; font-weight: bold">(</span><span style="color: #00afd7; text-decoration-color: #00afd7">n: </span><span style="color: #008000; text-decoration-color: #008000">&#x27;int&#x27;</span><span style="color: #00afd7; text-decoration-color: #00afd7; font-weight: bold">)</span><span style="color: #00afd7; text-decoration-color: #00afd7"> -&gt; </span><span style="color: #008000; text-decoration-color: #008000">&#x27;int&#x27;</span><span style="color: #00afd7; text-decoration-color: #00afd7"> </span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_submitted</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>                                                          <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_done</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>                                                               <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_result</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>                                                             <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_exception</span>                                                            <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_cancelled</span>                                                            <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"> Ref: </span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">3itpr5dm</span><span style="color: #00afd7; text-decoration-color: #00afd7"> </span>
</code>
</pre>

</p>
</div>
<h3 id="task-specific-events">Task Specific Events<a class="headerlink" href="#task-specific-events" title="Permanent link">#</a></h3>
<p>As you may have noticed, we can see the <code>Task</code> itself in the <code>Scheduler</code> as well as the
events it defines. This allows us to react to certain tasks themselves, and not generally
everything that may pass through the <code>Scheduler</code>.</p>
<p>In the below example, we'll do two things. First is we'll create a <code>Task</code> and react to
it's events, but also use the <code>Scheduler</code> directly and use <code>submit()</code>. Then we'll see
how the callbacks reacted to different events.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">amltk</span> <span class="kn">import</span> <span class="n">Scheduler</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="k">def</span> <span class="nf">echo</span><span class="p">(</span><span class="n">msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="k">return</span> <span class="n">msg</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="n">scheduler</span> <span class="o">=</span> <span class="n">Scheduler</span><span class="o">.</span><span class="n">with_processes</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="n">echo_task</span> <span class="o">=</span> <span class="n">scheduler</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">echo</span><span class="p">)</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="c1"># Launch the task and do a raw `submit()` with the Scheduler</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_start</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="k">def</span> <span class="nf">launch_initial_task</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>    <span class="n">echo_task</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>    <span class="n">scheduler</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">echo</span><span class="p">,</span> <span class="s2">&quot;hi&quot;</span><span class="p">)</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="c1"># Callback for anything result from the scheduler</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_future_result</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="k">def</span> <span class="nf">from_scheduler</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;result_from_scheduler </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="c1"># Callback for specifically results from the `echo_task`</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="nd">@echo_task</span><span class="o">.</span><span class="n">on_result</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="k">def</span> <span class="nf">from_task</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;result_from_scheduler </span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="n">scheduler</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
<div class="result">
<p>result_from_scheduler hello
result_from_scheduler hello
result_from_scheduler hi

<pre style="font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace;font-size:0.7rem">
<code style="font-family:inherit"><span style="color: #800080; text-decoration-color: #800080"></span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold"> Scheduler </span><span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span> <span style="font-weight: bold"> Executor                  Queue: (</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold">0</span><span style="font-weight: bold">)                                       </span> <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   ProcessPoolExecutor                                                    <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">&#x27;max_workers&#x27;</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span><span style="font-weight: bold">}</span>                                                       <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                      <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_empty</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_start</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">launch_initial_task</span><span style="font-weight: bold">()</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">1</span><span style="font-style: italic">)</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finishing</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finished</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_stop</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_timeout</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_submitted</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 2</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_done</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 2</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_cancelled</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_exception</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_result</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 2</span>
<span style="color: #800080; text-decoration-color: #800080">   </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">from_scheduler</span><span style="font-weight: bold">(</span>_, msg: <span style="color: #008000; text-decoration-color: #008000">&#x27;str&#x27;</span><span style="font-weight: bold">)</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">2</span><span style="font-style: italic">)</span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #00afd7; text-decoration-color: #00afd7"> </span><span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">Task </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">echo</span><span style="color: #00afd7; text-decoration-color: #00afd7; font-weight: bold">(</span><span style="color: #00afd7; text-decoration-color: #00afd7">msg: </span><span style="color: #008000; text-decoration-color: #008000">&#x27;str&#x27;</span><span style="color: #00afd7; text-decoration-color: #00afd7; font-weight: bold">)</span><span style="color: #00afd7; text-decoration-color: #00afd7"> -&gt; </span><span style="color: #008000; text-decoration-color: #008000">&#x27;str&#x27;</span><span style="color: #00afd7; text-decoration-color: #00afd7"> </span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_submitted</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>                                                          <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_done</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>                                                               <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_result</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>                                                             <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span>  <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">from_task</span><span style="font-weight: bold">(</span>_, msg: <span style="color: #008000; text-decoration-color: #008000">&#x27;str&#x27;</span><span style="font-weight: bold">)</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">1</span><span style="font-style: italic">)</span>                           <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_exception</span>                                                            <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_cancelled</span>                                                            <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"> Ref: </span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">6hvmtC3K</span><span style="color: #00afd7; text-decoration-color: #00afd7"> </span>
</code>
</pre>

</p>
</div>
<p>We can see in the output of the above code that the <code>@scheduler.on_future_result</code> was called twice,
meaning our callback <code class="highlight"><span class="k">def</span> <span class="nf">from_scheduler</span><span class="p">()</span></code> was called twice,
one for the result of <code class="highlight"><span class="n">echo_task</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">)</span></code> and the other
from <code class="highlight"><span class="n">scheduler</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">echo</span><span class="p">,</span> <span class="s2">&quot;hi&quot;</span><span class="p">)</span></code>. On the other hand, the event <code>@task.on_result</code>
was only called once, meaning our callback <code class="highlight"><span class="k">def</span> <span class="nf">from_task</span><span class="p">()</span></code> was only called once.</p>
<p>In practice, you will likely need to define a variety of tasks for your AutoML System and
having dedicated code to respond to individual tasks is of critical importance. This
can even allow you to chain the results of one task into another, and define more complex
workflows.</p>
<p>The below example shows how you can define two tasks with the scheduler and have
certain callbacks for different tasks, or even share callbacks between them!</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">amltk</span> <span class="kn">import</span> <span class="n">Scheduler</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="k">def</span> <span class="nf">expensive_thing_1</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="k">def</span> <span class="nf">expensive_thing_2</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="k">return</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="c1"># Create a scheduler and 2 tasks</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="n">scheduler</span> <span class="o">=</span> <span class="n">Scheduler</span><span class="o">.</span><span class="n">with_processes</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="n">task_1</span> <span class="o">=</span> <span class="n">scheduler</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">expensive_thing_1</span><span class="p">)</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="n">task_2</span> <span class="o">=</span> <span class="n">scheduler</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">expensive_thing_1</span><span class="p">)</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="c1"># A list of things we want to compute</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="n">items</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_start</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="k">def</span> <span class="nf">submit_initial</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>    <span class="n">next_item</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>    <span class="n">task_1</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">next_item</span><span class="p">)</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="nd">@task_1</span><span class="o">.</span><span class="n">on_result</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="k">def</span> <span class="nf">submit_task_2_with_results_of_task_1</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">result</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;When task_1 returns, send the result to task_2&quot;&quot;&quot;</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>    <span class="n">task_2</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="nd">@task_1</span><span class="o">.</span><span class="n">on_result</span>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="k">def</span> <span class="nf">submit_task_1_with_next_item</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">result</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;When task_1 returns, launch it again with the next items&quot;&quot;&quot;</span>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>    <span class="n">next_item</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>    <span class="k">if</span> <span class="n">next_item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>        <span class="n">task_1</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">next_item</span><span class="p">)</span>
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a>        <span class="k">return</span>
<a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a>
<a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Done!&quot;</span><span class="p">)</span>
<a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a>
<a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a><span class="c1"># You may share callbacks for the two tasks</span>
<a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a><span class="nd">@task_1</span><span class="o">.</span><span class="n">on_exception</span>
<a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a><span class="nd">@task_2</span><span class="o">.</span><span class="n">on_exception</span>
<a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a><span class="k">def</span> <span class="nf">handle_task_exception</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">exception</span><span class="p">:</span> <span class="ne">BaseException</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;A task errored! </span><span class="si">{</span><span class="n">exception</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a>
<a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a><span class="n">scheduler</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
<div class="result">
<p>Done!

<pre style="font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace;font-size:0.7rem">
<code style="font-family:inherit"><span style="color: #800080; text-decoration-color: #800080"></span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold"> Scheduler </span><span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span> <span style="font-weight: bold"> Executor                  Queue: (</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold">0</span><span style="font-weight: bold">)                                       </span> <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   ProcessPoolExecutor                                                    <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">&#x27;max_workers&#x27;</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span><span style="font-weight: bold">}</span>                                                       <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                      <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_empty</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_start</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">submit_initial</span><span style="font-weight: bold">()</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">1</span><span style="font-style: italic">)</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finishing</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finished</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_stop</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_timeout</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_submitted</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 6</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_done</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 6</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_cancelled</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_exception</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_result</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 6</span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #00afd7; text-decoration-color: #00afd7"> </span><span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">Task </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">expensive_thing_1</span><span style="color: #00afd7; text-decoration-color: #00afd7; font-weight: bold">(</span><span style="color: #00afd7; text-decoration-color: #00afd7">x: </span><span style="color: #008000; text-decoration-color: #008000">&#x27;int&#x27;</span><span style="color: #00afd7; text-decoration-color: #00afd7; font-weight: bold">)</span><span style="color: #00afd7; text-decoration-color: #00afd7"> -&gt; </span><span style="color: #008000; text-decoration-color: #008000">&#x27;int&#x27;</span><span style="color: #00afd7; text-decoration-color: #00afd7"> </span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_submitted</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 3</span>                                                          <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_done</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 3</span>                                                               <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_result</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 3</span>                                                             <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span>  <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">submit_task_2_with_results_of_task_1</span><span style="font-weight: bold">(</span>_, result: <span style="color: #008000; text-decoration-color: #008000">&#x27;int&#x27;</span><span style="font-weight: bold">)</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span> <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span>    <span style="font-style: italic">(</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">3</span><span style="font-style: italic">)</span>                                                                  <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span>  <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">submit_task_1_with_next_item</span><span style="font-weight: bold">(</span>_, result: <span style="color: #008000; text-decoration-color: #008000">&#x27;int&#x27;</span><span style="font-weight: bold">)</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">3</span><span style="font-style: italic">)</span>     <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_exception</span>                                                            <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span>  <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">handle_task_exception</span><span style="font-weight: bold">(</span>_, exception: <span style="color: #008000; text-decoration-color: #008000">&#x27;BaseException&#x27;</span><span style="font-weight: bold">)</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span>   <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_cancelled</span>                                                            <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #00afd7; text-decoration-color: #00afd7"> Ref: </span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">NjzZAPkD</span><span style="color: #00afd7; text-decoration-color: #00afd7"> </span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #00afd7; text-decoration-color: #00afd7"> </span><span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">Task </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">expensive_thing_1</span><span style="color: #00afd7; text-decoration-color: #00afd7; font-weight: bold">(</span><span style="color: #00afd7; text-decoration-color: #00afd7">x: </span><span style="color: #008000; text-decoration-color: #008000">&#x27;int&#x27;</span><span style="color: #00afd7; text-decoration-color: #00afd7; font-weight: bold">)</span><span style="color: #00afd7; text-decoration-color: #00afd7"> -&gt; </span><span style="color: #008000; text-decoration-color: #008000">&#x27;int&#x27;</span><span style="color: #00afd7; text-decoration-color: #00afd7"> </span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_submitted</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 3</span>                                                          <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_done</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 3</span>                                                               <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_result</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 3</span>                                                             <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_exception</span>                                                            <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span>  <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">handle_task_exception</span><span style="font-weight: bold">(</span>_, exception: <span style="color: #008000; text-decoration-color: #008000">&#x27;BaseException&#x27;</span><span style="font-weight: bold">)</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span>   <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_cancelled</span>                                                            <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"> Ref: </span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">2qim6SWv</span><span style="color: #00afd7; text-decoration-color: #00afd7"> </span>
</code>
</pre>

</p>
</div>
<h2 id="task-plugins">Task Plugins<a class="headerlink" href="#task-plugins" title="Permanent link">#</a></h2>
<p>Another benefit of <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/task/#amltk.scheduling.task.Task"><code>Task</code></a> objects is that we can attach
a <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/plugins/plugin/#amltk.scheduling.plugins.plugin.Plugin"><code>Plugin</code></a> to them. These plugins can automate control
behaviour of tasks, either through preventing their execution,
modifying the function and its arguments or even attaching plugin specific events!</p>
<p>For a complete reference, please see the <a href="../../reference/scheduling/plugins/">plugin reference page</a>.</p>
<h3 id="call-limiter">Call Limiter<a class="headerlink" href="#call-limiter" title="Permanent link">#</a></h3>
<p>Perhaps one of the more useful plugins, at least when designing an AutoML System is the
<a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/plugins/limiter/#amltk.scheduling.plugins.limiter.Limiter"><code>Limiter</code></a> plugin. This can help you control
both it's concurrency or the absolute limit of how many times a certain task can be
successfully submitted.</p>
<p>In the following contrived example, we will setup a <code>Scheduler</code> with 2 workers and attempt
to submit a <code>Task</code> 4 times in rapid succession. However we have the constraint that we
only ever want 2 of these tasks running at a given time. Let's see how we could achieve that.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">amltk.scheduling</span> <span class="kn">import</span> <span class="n">Scheduler</span><span class="p">,</span> <span class="n">Limiter</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="k">def</span> <span class="nf">my_func</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="k">return</span> <span class="n">x</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="n">scheduler</span> <span class="o">=</span> <span class="n">Scheduler</span><span class="o">.</span><span class="n">with_processes</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="c1"># Specify a concurrency limit of 2</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="hll"><span class="n">task</span> <span class="o">=</span> <span class="n">scheduler</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">my_func</span><span class="p">,</span> <span class="n">plugins</span><span class="o">=</span><span class="n">Limiter</span><span class="p">(</span><span class="n">max_concurrent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</span><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="c1"># A list of 10 things we want to compute</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="n">items</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_start</span><span class="p">(</span><span class="n">repeat</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># Repeat callback 4 times</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="k">def</span> <span class="nf">submit</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>    <span class="n">next_item</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>    <span class="n">task</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">next_item</span><span class="p">)</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="nd">@task</span><span class="o">.</span><span class="n">on_result</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="k">def</span> <span class="nf">record_result</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">result</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>    <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="nd">@task</span><span class="o">.</span><span class="n">on_result</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="k">def</span> <span class="nf">launch_another</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">result</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>    <span class="n">next_item</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>    <span class="k">if</span> <span class="n">next_item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>        <span class="n">task</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">next_item</span><span class="p">)</span>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a><span class="n">scheduler</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a><span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</code></pre></div>
<div class="result">
<p>[0, 1, 4, 5, 6, 7, 8, 9]

<pre style="font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace;font-size:0.7rem">
<code style="font-family:inherit"><span style="color: #800080; text-decoration-color: #800080"></span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold"> Scheduler </span><span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span> <span style="font-weight: bold"> Executor                  Queue: (</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold">0</span><span style="font-weight: bold">)                                       </span> <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   ProcessPoolExecutor                                                    <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">&#x27;max_workers&#x27;</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">2</span><span style="font-weight: bold">}</span>                                                       <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                      <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_empty</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_start</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">submit</span><span style="font-weight: bold">()</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">4</span><span style="font-style: italic">)</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finishing</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finished</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_stop</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_timeout</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_submitted</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 8</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_done</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 8</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_cancelled</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_exception</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_result</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 8</span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #00afd7; text-decoration-color: #00afd7"> </span><span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">Task </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">my_func</span><span style="color: #00afd7; text-decoration-color: #00afd7; font-weight: bold">(</span><span style="color: #00afd7; text-decoration-color: #00afd7">x: </span><span style="color: #008000; text-decoration-color: #008000">&#x27;int&#x27;</span><span style="color: #00afd7; text-decoration-color: #00afd7; font-weight: bold">)</span><span style="color: #00afd7; text-decoration-color: #00afd7"> -&gt; </span><span style="color: #008000; text-decoration-color: #008000">&#x27;int&#x27;</span><span style="color: #00afd7; text-decoration-color: #00afd7"> </span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span>  Plugin limiter  <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span>  Concurrent 0/2                                                        <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span>  <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_submitted</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 8</span>                                                          <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_done</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 8</span>                                                               <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_result</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 8</span>                                                             <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span>  <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">record_result</span><span style="font-weight: bold">(</span>_, result: <span style="color: #008000; text-decoration-color: #008000">&#x27;int&#x27;</span><span style="font-weight: bold">)</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">8</span><span style="font-style: italic">)</span>                    <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span>  <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">launch_another</span><span style="font-weight: bold">(</span>_, result: <span style="color: #008000; text-decoration-color: #008000">&#x27;int&#x27;</span><span style="font-weight: bold">)</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">8</span><span style="font-style: italic">)</span>                   <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_exception</span>                                                            <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_cancelled</span>                                                            <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">call-limit-reached</span>                                                      <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">concurrent-limit-reached</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 2</span>                                              <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">disabled-due-to-running-task</span>                                            <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"> Ref: </span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">vdUdYuTD</span><span style="color: #00afd7; text-decoration-color: #00afd7"> </span>
</code>
</pre>

</p>
</div>
<p>You can notice that this limiting worked, given the numbers <code class="highlight"><span class="mi">2</span></code> and <code class="highlight"><span class="mi">3</span></code>
were skipped and not printed. As expected, we successfully launched the task with both 
<code class="highlight"><span class="mi">0</span></code> and <code class="highlight"><span class="mi">1</span></code> but as these tasks were not done processing, the <code>Limiter</code>
kicks in and prevents the other two.</p>
<p>A natural extension to ask is then, "how do we requeue these?". Well lets take a look at the above
output. The plugin has added three new events to <code>Task</code>, namely
<code>@call-limit-reached</code>, <code>@concurrent-limit-reached</code> and <code>@disabled-due-to-running-task</code>.</p>
<p>To subscribe to these <em>extra</em> events (or any for that matter), we can use
the <a class="autorefs autorefs-internal" href="../../api/amltk/scheduling/task/#amltk.scheduling.task.Task"><code>task.on()</code></a>
method. Below is the same example except here we respond to <code>@call-limit-reached</code>
and requeue the submissions that failed.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">amltk.scheduling</span> <span class="kn">import</span> <span class="n">Scheduler</span><span class="p">,</span> <span class="n">Limiter</span><span class="p">,</span> <span class="n">Task</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">from</span> <span class="nn">amltk.types</span> <span class="kn">import</span> <span class="n">Requeue</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="k">def</span> <span class="nf">my_func</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="k">return</span> <span class="n">x</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="n">scheduler</span> <span class="o">=</span> <span class="n">Scheduler</span><span class="o">.</span><span class="n">with_processes</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="n">task</span> <span class="o">=</span> <span class="n">scheduler</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">my_func</span><span class="p">,</span> <span class="n">plugins</span><span class="o">=</span><span class="n">Limiter</span><span class="p">(</span><span class="n">max_concurrent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="c1"># A list of 10 things we want to compute</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="hll"><span class="n">items</span> <span class="o">=</span> <span class="n">Requeue</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>  <span class="c1"># A convenience type that you can requeue/append to</span>
</span><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="nd">@scheduler</span><span class="o">.</span><span class="n">on_start</span><span class="p">(</span><span class="n">repeat</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># Repeat callback 4 times</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="k">def</span> <span class="nf">submit</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>    <span class="n">next_item</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>    <span class="n">task</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">next_item</span><span class="p">)</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="hll"><span class="nd">@task</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s2">&quot;concurrent-limit-reached&quot;</span><span class="p">)</span>
</span><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="hll"><span class="k">def</span> <span class="nf">add_back_to_queue</span><span class="p">(</span><span class="n">task</span><span class="p">:</span> <span class="n">Task</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="hll">    <span class="n">items</span><span class="o">.</span><span class="n">requeue</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>  <span class="c1"># Put x back at the start of the queue</span>
</span><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="nd">@task</span><span class="o">.</span><span class="n">on_result</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="k">def</span> <span class="nf">record_result</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">result</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>    <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="nd">@task</span><span class="o">.</span><span class="n">on_result</span>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="k">def</span> <span class="nf">launch_another</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">result</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>    <span class="n">next_item</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>    <span class="k">if</span> <span class="n">next_item</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>        <span class="n">task</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">next_item</span><span class="p">)</span>
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a><span class="n">scheduler</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</code></pre></div>
<div class="result">
<p>[1, 0, 2, 3, 4, 5, 6, 7, 8, 9]

<pre style="font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace;font-size:0.7rem">
<code style="font-family:inherit"><span style="color: #800080; text-decoration-color: #800080"></span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold"> Scheduler </span><span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span> <span style="font-weight: bold"> Executor                  Queue: (</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold">0</span><span style="font-weight: bold">)                                       </span> <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   ProcessPoolExecutor                                                    <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>   <span style="font-weight: bold">{</span><span style="color: #008000; text-decoration-color: #008000">&#x27;max_workers&#x27;</span>: <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">2</span><span style="font-weight: bold">}</span>                                                       <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                      <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>                                                                              <span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"></span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_empty</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_start</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span> <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">submit</span><span style="font-weight: bold">()</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">4</span><span style="font-style: italic">)</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finishing</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_finished</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 1</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_stop</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_timeout</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_submitted</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 10</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_done</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 10</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_cancelled</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_exception</span>
<span style="color: #800080; text-decoration-color: #800080">   </span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_future_result</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 10</span>
<span style="color: #800080; text-decoration-color: #800080"> </span><span style="color: #00afd7; text-decoration-color: #00afd7"> </span><span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">Task </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">my_func</span><span style="color: #00afd7; text-decoration-color: #00afd7; font-weight: bold">(</span><span style="color: #00afd7; text-decoration-color: #00afd7">x: </span><span style="color: #008000; text-decoration-color: #008000">&#x27;int&#x27;</span><span style="color: #00afd7; text-decoration-color: #00afd7; font-weight: bold">)</span><span style="color: #00afd7; text-decoration-color: #00afd7"> -&gt; </span><span style="color: #008000; text-decoration-color: #008000">&#x27;int&#x27;</span><span style="color: #00afd7; text-decoration-color: #00afd7"> </span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span>  Plugin limiter  <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span>  Concurrent 0/2                                                        <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span>  <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_submitted</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 10</span>                                                         <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_done</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 10</span>                                                              <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_result</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 10</span>                                                            <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span>  <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">record_result</span><span style="font-weight: bold">(</span>_, result: <span style="color: #008000; text-decoration-color: #008000">&#x27;int&#x27;</span><span style="font-weight: bold">)</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">10</span><span style="font-style: italic">)</span>                   <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span>  <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">launch_another</span><span style="font-weight: bold">(</span>_, result: <span style="color: #008000; text-decoration-color: #008000">&#x27;int&#x27;</span><span style="font-weight: bold">)</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">10</span><span style="font-style: italic">)</span>                  <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_exception</span>                                                            <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">on_cancelled</span>                                                            <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">call-limit-reached</span>                                                      <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">concurrent-limit-reached</span><span style="color: #808000; text-decoration-color: #808000; font-weight: bold; font-style: italic"> 2</span>                                              <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span>  <span style="color: #00ffff; text-decoration-color: #00ffff; font-style: italic">def </span><span style="color: #800000; text-decoration-color: #800000; font-weight: bold">add_back_to_queue</span><span style="font-weight: bold">(</span>task: <span style="color: #008000; text-decoration-color: #008000">&#x27;Task&#x27;</span>, x: <span style="color: #008000; text-decoration-color: #008000">&#x27;int&#x27;</span><span style="font-weight: bold">)</span> -&gt; <span style="color: #008000; text-decoration-color: #008000">&#x27;None&#x27;</span><span style="font-style: italic"> (</span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">2</span><span style="font-style: italic">)</span>          <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"></span> <span style="color: #800080; text-decoration-color: #800080; font-weight: bold">@</span><span style="color: #800080; text-decoration-color: #800080; font-weight: bold; font-style: italic">disabled-due-to-running-task</span>                                            <span style="color: #00afd7; text-decoration-color: #00afd7"></span>
<span style="color: #800080; text-decoration-color: #800080">    </span><span style="color: #00afd7; text-decoration-color: #00afd7"> Ref: </span><span style="color: #808000; text-decoration-color: #808000; font-style: italic">SVujUYFk</span><span style="color: #00afd7; text-decoration-color: #00afd7"> </span>
</code>
</pre>

</p>
</div>
<h3 id="under-construction">Under Construction<a class="headerlink" href="#under-construction" title="Permanent link">#</a></h3>
<div class="highlight"><pre><span></span><code>Please see the following reference pages in the meantime:

* [scheduler reference](../reference/scheduling/scheduler.md) - A slighltly
    more condensed version of how to use the `Scheduler`.
* [task reference](../reference/scheduling/task.md) - A more comprehensive
    explanation of `Task`s and their `@events`.
* [plugin reference](../reference/scheduling/plugins.md) - An intro to plugins
    and how to create your own.
* [executors reference](../reference/scheduling/executors.md) - A list of
    executors and how to use them.
* [events reference](../reference/scheduling/events.md) - A more comprehensive
    look at the event system in AutoML-Toolkit and how to work with them or extend them.
</code></pre></div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../pipelines/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Pipelines Guide">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Pipelines Guide
              </div>
            </div>
          </a>
        
        
          
          <a href="../../reference/" class="md-footer__link md-footer__link--next" aria-label="Next: Reference">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Reference
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/automl" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/automl_org" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "content.code.copy", "navigation.footer", "navigation.tabs", "navigation.tabs.sticky", "navigation.expand", "toc.follow", "header.autohide", "search.suggest", "search.highlight", "search.share"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.81fa17fe.min.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>